GBA=G={_c:0,_p:0,_t:"",fls:0,thumb:0,stopped:!1,r:[0,0,0,0,0,0,0,0,0,0,0,0,0,50364160,0,134217728,0],cpsr:0,m:{2:[],3:[],4:[],5:[],6:[],7:[],14:[]},ra:[],rt:[],rh:[],rw:[],update_cpsr_n:function(a){G.cpsr=1===G.bit(G.r[a],31)?G.cpsr|2147483648:G.cpsr&2147483647},update_cpsr_z:function(a){G.cpsr=0===G.r[a]?G.cpsr|1073741824:G.cpsr&3221225471},update_cpsr_c:function(a){4294967295<G.r[a]?(G.cpsr|=536870912,G.r[a]=G.bit(G.r[a],0,31)):G.cpsr&=3758096383},update_cpsr_c_sub:function(a,c){var f=!1;a===c? f=!0:c<a?f=a-c<a+(Math.pow(2,a.toString(2).length)-1-c):a>c&&(f=c-a>c+(Math.pow(2,c.toString(2).length)-1-a));G.cpsr=f?G.cpsr|536870912:G.cpsr&3758096383},update_cpsr_v:function(){},play:function(a,c,f){if(window.HTMLCanvasElement){G._c=c.getContext("2d");G._p=G._c.createImageData(240,160);G.mem(67109E3,2,512);G.mem(67110914,2,3328);var h=new XMLHttpRequest;h.open("GET",a);h.responseType="arraybuffer";h.send();h.addEventListener("progress",function(a){f.value=a.loaded/a.total});h.onload=function(){G.m[8]= -1!==navigator.userAgent.indexOf("IE 9")?VBArray(h.responseBody).toArray():new Uint8Array(h.response);G.fc();G.fl()}}},fc:function(){var a,c,f,h,b,k,e,p,n,m,q,j,d,g,l;for(j=0;j<G.m[8].length;j+=4){b=0;for(d=4;d;d--)b=G.ls(b,8)+(G.m[8][j+d-1]||0);G.rw.push(b)}for(j=0;j<G.m[8].length;j+=2){b=0;for(d=2;d;d--)b=G.ls(b,8)+(G.m[8][j+d-1]||0);G.rh.push(b)}for(j=0;j<G.m[8].length;j+=4)if(d=j/4,b=G.rw[d],!(0<d&&48>d)){g=G.bit(b,28,31);if(77823===G.bit(b,8,27))G.ra[d]=[G.arm_bx,[G.bit(b,0,3)]];else if(5=== G.bit(b,25,27))e=G.bit(b,24),G.ra[d]=e?[G.arm_bl,[134217728+j+4,134217728+j+8+4*G.bit(b,0,23)]]:[G.arm_b,[134217728+j+8+4*G.bit(b,0,23)]];else if(1===G.bit(b,26,27))G.bit(b,25),G.bit(b,24),G.bit(b,23),G.bit(b,22),a=G.bit(b,20),c=G.bit(b,16,19),f=G.bit(b,12,15),G.bit(b,21),G.bit(b,7,11),G.bit(b,5,6),G.bit(b,0,3),b=G.bit(b,0,11),G.ra[d]=a?[G.arm_ldr,[f,c,b]]:[G.arm_str,[f,c,b]];else if(0===G.bit(b,25,27)&&0===G.bit(b,7)&&15!=G.bit(b,12,15))G.ra[d]=[G.arm7,[]];else if(a=G.bit(b,21,24),G.bit(b,21),G.bit(b, 25),G.bit(b,20),c=G.bit(b,16,19),f=G.bit(b,12,15),G.bit(b,8,11),G.bit(b,0,7),G.bit(b,4),G.bit(b,8,11),G.bit(b,7,11),G.bit(b,5,6),G.bit(b,0,3),e=G.bit(b,22),p=G.bit(b,19),k=G.bit(b,18),G.bit(b,17),n=G.bit(b,16),G.bit(b,8,11),G.bit(b,0,7),h=G.bit(b,0,3),m=0,q=void 0,!k&&8<=a&&11>=a)1===p&&(m+=4278190080),1===n&&(m+=255),G.ra[d]=e?[G.arm_msr_spsr,[h,p,n,m]]:[G.arm_msr_cpsr,[h,p,n,m]];else switch(j&&(h=2*G.bit(b,8,11),b=G.bit(b,0,7),q=G.ror(b,32,h)),a){case 4:G.ra[d]=[G.arm_add,[f,c,q]];break;case 13:G.ra[d]= [G.arm_mov,[f,q]]}G.ra[d]&&14!=g&&G.ra[d][1].push(g)}for(j=0;j<G.m[8].length;j+=2)if(d=j/2,b=G.rh[d],!(94>d))if(e=G.bit(b,8,15),p=G.bit(b,10,15),n=G.bit(b,11,15),m=G.bit(b,12,15),q=G.bit(b,13,15),g=G.bit(b,0,2),f=G.bit(b,3,5),a=G.bit(b,3,5),h=G.bit(b,6,10),k=G.bit(b,6,8),c=G.bit(b,0,7),G.rt[d]=[G.plop,[1]],0===q)e=G.bit(b,11,12),3===e?(e=G.bit(b,9,10),2===e&&!k?G.rt[d]=[G.thumb2_mov_rr,[g,f]]:0===e?G.rt[d]=[G.thumb_add_rrr,[g,f,G.bit(b,6,8)]]:1===e?G.rt[d]=[G.thumb_sub_rrr,[g,f,G.bit(b,6,8)]]:2=== e?G.rt[d]=[G.thumb_add_rrn,[g,f,G.bit(b,6,8)]]:3===e&&(G.rt[d]=[G.thumb_sub_rrn,[g,f,G.bit(b,6,8)]])):0===e?G.rt[d]=[G.thumb_lsl_rrn,[g,f,h]]:1===e?(0===h&&(h=32),G.rt[d]=[G.thumb_lsr,[g,f,h]]):2===e&&(0===h&&(h=32),G.rt[d]=[G.thumb_asr,[g,f,h]]);else if(1===q)e=G.bit(b,11,12),0===e?G.rt[d]=[G.thumb_mov_rn,[G.bit(b,8,10),c]]:1===e?G.rt[d]=[G.thumb_cmp_rn,[G.bit(b,8,10),c]]:2===e?G.rt[d]=[G.thumb_add_rn,[G.bit(b,8,10),c]]:3===e&&(G.rt[d]=[G.thumb_sub_rn,[G.bit(b,8,10),c]]);else if(16===p)e=G.bit(b, 6,9),9===e&&(G.rt[d]=[G.thumb_neg_rr,[g,f]]),10===e&&(G.rt[d]=[G.thumb_cmp_rr,[g,f]]),12===e&&(G.rt[d]=[G.thumb_orr,[g,f]]),13===e&&(G.rt[d]=[G.thumb_mul,[g,f]]),14===e&&(G.rt[d]=[G.thumb_bic,[g,f]]);else if(17===p)g=G.ls(G.bit(b,7),3)+g,f=G.ls(G.bit(b,6),3)+f,e=G.bit(b,8,9),0===e?G.rt[d]=[G.thumb_add_rr,[g,f]]:2===e?G.rt[d]=8===g&&8===f?[G.thumb_nop,[]]:[G.thumb5_mov_rr,[g,f]]:3===e&&0===G.bit(b,7)&&(G.rt[d]=[G.thumb_bx,[f]]);else if(9===n)G.rt[d]=[G.thumb_ldr_n,[G.bit(b,8,10),G.mem((134217728+j+ 4&4294967292)+4*c,4)]];else if(5===m)e=G.bit(b,10,11),1===G.bit(b,9)?0===e&&(G.rt[d]=[G.thumb_strh_rrr,[g,a,k]]):0===e?G.rt[d]=[G.thumb_str_rrr,[g,a,k]]:1!==e&&2!==e&&3===e&&(G.rt[d]=[G.thumb_ldrb_rrr,[g,a,k]]);else if(3===q)e=G.bit(b,11,12),0===e?G.rt[d]=[G.thumb_str_rrn,[g,a,h]]:1===e?G.rt[d]=[G.thumb_ldr_rrn,[g,a,h]]:2===e?G.rt[d]=[G.thumb_strb_rrn,[g,a,h]]:3===e&&(G.rt[d]=[G.thumb_ldrb_rrn,[g,a,h]]);else if(8===m)e=G.bit(b,11),0===e?G.rt[d]=[G.thumb_strh_rrn,[g,a,h]]:1===e&&(G.rt[d]=[G.thumb_ldrh_rrn, [g,a,h]]);else if(9===m)g=G.bit(b,8,10),G.rt[d]=1===G.bit(b,11)?[G.thumb_ldr_spn,[g,4*c]]:[G.thumb_str_spn,[g,4*c]];else if(10!==m)if(176===e)g=4*G.bit(b,0,6),1===G.bit(b,7)&&(g=-g),G.rt[d]=[G.thumb_add_spn,[g]];else if(190!==e)if(11===m)e=G.bit(b,11),G.rt[d]=0===e?[G.thumb_push,[G.bit(b,0,7),G.bit(b,8)]]:[G.thumb_pop,[G.bit(b,0,7),G.bit(b,8)]];else if(12===m)e=G.bit(b,11),0===e?G.rt[d]=[G.thumb_stmia,[G.bit(b,8,10),G.bit(b,0,7)]]:1===e&&(G.rt[d]=[G.thumb_ldmia,[G.bit(b,8,10),G.bit(b,0,7)]]);else if(223!== e)if(13===m||28===n){if(28===n)l=G.thumb_b;else switch(g=G.bit(b,8,11),g){case 0:l=G.thumb_beq;break;case 1:l=G.thumb_bne;break;case 2:l=G.thumb_bcs;break;case 3:l=G.thumb_bcc;break;case 4:l=G.thumb_bmi;break;case 5:l=G.thumb_bpl;break;case 6:l=G.thumb_bvs;break;case 7:l=G.thumb_bvc;break;case 8:l=G.thumb_bhi;break;case 9:l=G.thumb_bls;break;case 10:l=G.thumb_bge;break;case 11:l=G.thumb_blt;break;case 12:l=G.thumb_bgt;break;case 13:l=G.thumb_ble}c*=2;254<c&&(c-=512);G.rt[d]=[l,[134217728+j+4+c]]}else 30=== n&&(g=G.mem(134217728+j+2,2),e=G.bit(g,11,15),b=G.ls(G.bit(b,0,10),12)+G.ls(G.bit(g,0,10),1),4194304<b&&(b-=8388608),31===e&&(G.rt[d]=[G.thumb_bl,[134217728+j+4+b,134217728+j+4|1]]))},fl:function(){var a,c;console.log(" # Address Assembler N Z C V r0 r1 r2 r3 r4 r5 r6 r7 r8 r9 r10 r11 r12 r13 (SP) r14 (LR) cpsr");for(a=0;366E3>a;a++){G._t=G.r[15].toString(16)+" ";1===G.thumb?(c=(G.r[15]-134217728)/2,void 0=== G.rt[c]&&console.log(c+" thumb is undefined"),G.rt[c][0](G.rt[c][1])):(c=(G.r[15]-134217728)/4,G.ra[c][0](G.ra[c][1]));-1===G.fls&&366E3<a&&(console.log("fls..."),G.fls=0);if(3>G.fls&&366E3<a){G._t+=" ";G._t=(" "+a.toString(10)).slice(-6)+" "+G._t.substr(0,33)+" "+G.bit(G.cpsr,31)+" "+G.bit(G.cpsr,30)+" "+G.bit(G.cpsr,29)+" "+G.bit(G.cpsr,28);for(c=0;15>c;c++)G._t+=" "+("0000000"+G.r[c].toString(16)).slice(-8);G._t+=" "+("0000000"+G.cpsr.toString(16)).slice(-8);console.log(G._t)}for(c= 0;15>c;c++)if(0>G.r[c]||4294967295<G.r[c])console.log("REGISTER "+c+" OUT OF BOUNDS:"+G.r[c]),G.fls=0;if(!0===G.stopped){G._c.putImageData(G._p,0,0);G.fls=2;break}366E3===a&&(console.log("========== OK =========="),G.fls=0,G._c.putImageData(G._p,0,0))}G._c.putImageData(G._p,0,0);2<G.fls&&!G.stopped&&console.log("unfinished fls...")},arm_bx:function(a){G._t+="BX r"+a[0];G.r[15]=G.r[a[0]]-1;G.cpsr|=32;G.thumb=1},arm_blx:function(){G._t+="BLX"},arm_b:function(a){G._t+="B 0x"+a[0].toString(16);G.r[15]= a[0]},arm_bl:function(){G._t+="BL"},arm_add:function(a){G._t+="ADD r"+a[0]+",=0x"+(G.r[a[1]]+(15===a[1]?8:0)+a[2]).toString(16);G.r[a[0]]=G.r[a[1]]+(15===a[1]?8:0)+a[2];G.r[15]+=4},arm_mov:function(a){G._t+="MOV r"+a[0]+",#0x"+a[1].toString(16);G.r[a[0]]=a[1];G.r[15]+=4},arm_msr_cpsr:function(a){G._t+="MSR cpsr_"+(a[1]?"f":"")+(a[2]?"c":"")+",r"+a[0];G.cpsr=G.r[a[0]]&a[3];G.r[15]+=4},arm_msr_spsr:function(){},arm7:function(){},arm_str:function(a){G._t+="STR r"+a[0]+",[r"+a[1]+",#0x"+a[2].toString(16)+ "]";G.mem(G.r[a[1]]+a[2],4,G.r[a[0]]);G.r[15]+=4},arm_ldr:function(a){G._t+="LDR r"+a[0]+",=#0x"+G.mem(G.r[a[1]]+(15==a[1]?8:0)+a[2],4).toString(16);G.r[a[0]]=G.mem(G.r[a[1]]+(15==a[1]?8:0)+a[2],4);G.r[15]+=4},thumb_lsl_rrn:function(a){G._t+="LSL r"+a[0]+",r"+a[1]+",#0x"+a[2].toString(16);G.r[a[0]]=G.ls(G.r[a[1]],a[2]);0!==a[2]&&G.update_cpsr_c(a[0]);0>G.r[a[0]]&&(G.r[a[0]]=4294967295+G.r[a[0]]+1);G.update_cpsr_n(a[0]);G.update_cpsr_z(a[0]);G.r[15]+=2},thumb_lsr:function(a){G._t+="LSR r"+a[0]+",r"+ a[1]+",#0x"+a[2].toString(16);G.r[a[0]]=G.rs(G.r[a[1]],a[2]);G.update_cpsr_c(a[0]);G.update_cpsr_n(a[0]);G.update_cpsr_z(a[0]);G.r[15]+=2},thumb_asr:function(a){G._t+="ASR r"+a[0]+",r"+a[1]+",#0x"+a[2].toString(16);G.r[a[0]]=G.r[a[1]]>>a[2];G.update_cpsr_c(a[0]);0>G.r[a[0]]&&(G.r[a[0]]=4294967295+G.r[a[0]]+1);G.update_cpsr_n(a[0]);G.update_cpsr_z(a[0]);G.r[15]+=2},thumb_add_rrr:function(a){G._t+="ADD r"+a[0]+",r"+a[1]+",r"+a[2];G.r[a[0]]=G.r[a[1]]+G.r[a[2]];0>G.r[a[0]]&&(G.r[a[0]]=4294967295+G.r[a[0]]+ 1);G.update_cpsr_c(a[0]);G.update_cpsr_n(a[0]);G.update_cpsr_z(a[0]);G.update_cpsr_v(a[0]);G.r[15]+=2},thumb_sub_rrr:function(a){G._t+="SUB r"+a[0]+",r"+a[1]+",r"+a[2];G.r[a[0]]=G.r[a[1]]-G.r[a[2]];0>G.r[a[0]]&&(G.r[a[0]]=4294967295+G.r[a[0]]+1);G.update_cpsr_c_sub(G.r[a[1]],G.r[a[2]]);G.update_cpsr_v(a[0]);G.update_cpsr_n(a[0]);G.update_cpsr_z(a[0]);G.r[15]+=2},thumb_add_rrn:function(a){G._t+="ADD R"+a[0]+",R"+a[1]+",#0x"+a[2].toString(16);G.r[a[0]]=G.r[a[1]]+a[2];G.update_cpsr_c(a[0]);G.update_cpsr_n(a[0]); G.update_cpsr_z(a[0]);G.update_cpsr_v(a[0]);G.r[15]+=2},thumb_sub_rrn:function(a){G._t+="SUB R"+a[0]+",R"+a[1]+",#0x"+a[2].toString(16);G.r[a[0]]=G.r[a[1]]-a[2];0>G.r[a[0]]&&(G.r[a[0]]=4294967295+G.r[a[0]]+1);G.update_cpsr_c_sub(G.r[a[1]],a[2]);G.update_cpsr_v(a[0]);G.update_cpsr_n(a[0]);G.update_cpsr_z(a[0]);G.r[15]+=2},thumb2_mov_rr:function(a){G._t+="MOV r"+a[0]+",r"+a[1];G.r[a[0]]=G.r[a[1]];G.r[15]+=2;G.update_cpsr_c(a[0]);G.update_cpsr_n(a[0]);G.update_cpsr_z(a[0]);G.update_cpsr_v(a[0])},thumb_mov_rn:function(a){G._t+= "MOV r"+a[0]+",#0x"+a[1].toString(16);G.r[a[0]]=a[1];G.update_cpsr_n(a[0]);G.update_cpsr_z(a[0]);G.r[15]+=2},thumb_cmp_rn:function(a){G._t+="CMP R"+a[0]+",#0x"+a[1].toString(16);G.r[16]=G.r[a[0]]-a[1];G.update_cpsr_c_sub(G.r[a[0]],a[1]);G.update_cpsr_v(16);G.update_cpsr_n(16);G.update_cpsr_z(16);G.r[15]+=2},thumb_add_rn:function(a){G._t+="ADD r"+a[0]+",#0x"+a[1].toString(16);G.r[a[0]]+=a[1];G.update_cpsr_c(a[0]);G.update_cpsr_v(a[0]);G.update_cpsr_n(a[0]);G.update_cpsr_z(a[0]);G.r[15]+=2},thumb_sub_rn:function(a){G._t+= "SUB r"+a[0]+",#0x"+a[1].toString(16);G.r[a[0]]-=a[1];G.update_cpsr_c_sub(G.r[a[0]],a[1]);G.update_cpsr_v(a[0]);G.update_cpsr_n(a[0]);G.update_cpsr_z(a[0]);G.r[15]+=2},thumb_neg_rr:function(a){G._t+="NEG r"+a[0]+",r"+a[1];G.r[a[0]]=4294967295-G.r[a[1]]+1;G.update_cpsr_c(a[0]);G.update_cpsr_v(a[0]);G.update_cpsr_n(a[0]);G.update_cpsr_z(a[0]);G.r[15]+=2},thumb_cmp_rr:function(a){G._t+="CMP r"+a[0]+",r"+a[1];G.r[16]=G.r[a[0]]-G.r[a[1]];G.update_cpsr_c_sub(G.r[a[0]],G.r[a[1]]);G.update_cpsr_v(16);G.update_cpsr_n(16); G.update_cpsr_z(16);G.r[15]+=2},thumb_orr:function(a){G._t+="ORR r"+a[0]+",r"+a[1];G.r[a[0]]|=G.r[a[1]];G.update_cpsr_n(a[0]);G.update_cpsr_z(a[0]);G.r[15]+=2},thumb_mul:function(a){G._t+="MUL r"+a[0]+",r"+a[1];G.r[a[0]]*=G.r[a[1]];G.update_cpsr_n(a[0]);G.update_cpsr_z(a[0]);G.r[15]+=2},thumb_bic:function(a){G._t+="BIC r"+a[0]+",r"+a[1];G.r[a[0]]&=4294967295-G.r[a[1]];G.update_cpsr_n(a[0]);G.update_cpsr_z(a[0]);G.r[15]+=2},thumb_add_rr:function(a){G._t+="ADD r"+a[0]+",r"+a[1];G.r[a[0]]+=G.r[a[1]]; G.r[15]+=2},thumb5_mov_rr:function(a){G._t+="MOV r"+a[0]+",r"+a[1];G.r[a[0]]=G.r[a[1]];G.r[15]+=2},thumb_nop:function(){G._t+="NOP";G.r[15]+=2},thumb_bx:function(a){G._t+="BX r"+a[0];G.r[15]=G.r[a[0]]-1},thumb_ldr_n:function(a){G._t+="LDR r"+a[0]+",=#0x"+a[1].toString(16);G.r[a[0]]=a[1];G.r[15]+=2},thumb_str_rrr:function(){G._t+="STR rrr"},thumb_strb_rrr:function(){},thumb_ldr_rrr:function(){},thumb_ldrb_rrr:function(){},thumb_strh_rrr:function(a){G._t+="STRH R"+a[0]+",[R"+a[1]+",R"+a[2]+"]";G.mem(G.r[a[1]]+ G.r[a[2]],2,G.r[a[0]]);G.r[15]+=2},thumb_str_rrn:function(a){G._t+="STR R"+a[0]+",[R"+a[1]+(a[2]?",#0x"+a[2]:"")+"]";G.mem(G.r[a[1]]+a[2],4,G.r[a[0]]);G.r[15]+=2},thumb_ldr_rrn:function(a){G._t+="LDR R"+a[0]+",[R"+a[1]+(a[2]?",#0x"+a[2]:"")+"]";G.r[a[0]]=G.mem(G.r[a[1]]+a[2],4);G.r[15]+=2},thumb_strb_rrn:function(){},thumb_ldrb_rrb:function(){},thumb_strh_rrn:function(a){G._t+="STRH R"+a[0]+",[R"+a[1]+(a[2]?",#0x"+a[2].toString(16):"")+"]";G.mem(G.r[a[1]]+a[2],2,G.r[a[0]]);G.r[15]+=2},thumb_ldrh_rrn:function(){}, thumb_str_spn:function(a){G._t+="STR R"+a[0]+",[SP"+(a[1]?",#0x"+a[1].toString(16):"")+"]";G.mem(G.r[13]+a[1],4,G.r[a[0]]);G.r[15]+=2},thumb_ldr_spn:function(a){G._t+="LDR R"+a[0]+",[SP"+(a[1]?",#0x"+a[1].toString(16):"")+"]";G.r[a[0]]=G.mem(G.r[13]+a[1],4);G.r[15]+=2},thumb_add_spn:function(a){G._t+="ADD SP,#"+a[0].toString(16);G.r[13]+=a[0];G.r[15]+=2},thumb_push:function(a){G._t+="PUSH {";1===a[1]&&(G.r[13]-=4,G.mem(G.r[13],4,G.r[14]),G._t+="R14,");for(var c=7;0<=c;c--)G.bit(a[0],c)&&(G.r[13]-= 4,G.mem(G.r[13],4,G.r[c]),G._t+="R"+c+",");G._t=G._t.substr(0,G._t.length-1)+"}";G.r[15]+=2},thumb_pop:function(a){G._t+="POP {";for(var c=0;8>c;c++)G.bit(a[0],c)&&(G.r[c]=G.mem(G.r[13],4),G.r[13]+=4,G._t+="R"+c+",");1===a[1]&&(G.mem(G.r[13],4,G.r[14]),G.r[13]+=4,G._t+="R15,");G._t=G._t.substr(0,G._t.length-1)+"}";G.r[15]+=2},thumb_stmia:function(a){G._t+="STMIA r"+a[0]+"!,{";for(var c=0;8>c;c++)1===G.bit(a[1],c)&&(G._t+="R"+c+",",G.mem(G.r[a[0]],4,G.r[c]),G.r[a[0]]+=4);G._t=G._t.substr(0,G._t.length- 1)+"}";G.r[15]+=2},thumb_ldmia:function(a){G._t+="LDMIA r"+a[0]+"!,{";for(var c=0;8>c;c++)1===G.bit(a[1],c)&&(G._t+="R"+c+",",G.r[c]=G.mem(G.r[a[0]],4),G.r[a[0]]+=4);G._t=G._t.substr(0,G._t.length-1)+"}";G.r[15]+=2},thumb_beq:function(a){G._t+="BEQ #0x"+a[0].toString(16);1073741824===(G.cpsr&1073741824)?G.r[15]=a[0]:(G._t+=";false",G.r[15]+=2)},thumb_bne:function(a){G._t+="BNE #0x"+a[0].toString(16);0===(G.cpsr&1073741824)?(a[0]<G.r[15]&&a[0]>G.r[15]-20&&G.fls++,G.r[15]=a[0]):(G._t+=";false",0<G.fls&& (G.fls=-1),G.r[15]+=2)},thumb_bcs:function(a){G._t+="BCS #0x"+a[0].toString(16);536870912===(G.cpsr&536870912)?(a[0]<G.r[15]&&a[0]>G.r[15]-20&&G.fls++,G.r[15]=a[0]):(G._t+=";false",0<G.fls&&(G.fls=-1),G.r[15]+=2)},thumb_bcc:function(){},thumb_bmi:function(){},thumb_bpl:function(){},thumb_bvs:function(){},thumb_bvc:function(){},thumb_bhi:function(){},thumb_bls:function(){},thumb_bge:function(){},thumb_blt:function(a){G._t+="BLT #0x"+a[0].toString(16);G.bit(G.cpsr,31)!==G.bit(G.cpsr,28)?(a[0]<G.r[15]&& a[0]>G.r[15]-20&&G.fls++,G.r[15]=a[0]):(G._t+=";false",0<G.fls&&(G.fls=-1),G.r[15]+=2)},thumb_bgt:function(){},thumb_ble:function(a){G._t+="BLE #0x"+a[0].toString(16);1073741824===(G.cpsr&1073741824)||G.bit(G.cpsr,31)!==G.bit(G.cpsr,28)?(a[0]<G.r[15]&&a[0]>G.r[15]-20&&G.fls++,G.r[15]=a[0]):(G._t+=";false",0<G.fls&&(G.fls=-1),G.r[15]+=2)},thumb_b:function(a){G._t+="B #0x"+a[0].toString(16);a[0]==G.r[15]&&(G.stopped=!0);G.r[15]=a[0]},thumb_bl:function(a){G._t+="BL #0x"+a[0].toString(16);G.r[14]=G.r[15]+ 4|1;G.r[15]=a[0]},ls:function(a,c){return a*Math.pow(2,c)},rs:function(a,c){return Math.floor(a/Math.pow(2,c))},bit:function(a,c,f){return G.rs(a,c)&Math.pow(2,(f||c)-c+1)-1},ror:function(a,c,f){return G.ls(a&Math.pow(2,f)-1,c-f)+G.rs(a,f)},mem:function(a,c,f,h){if(void 0===f&&134217728<=a&&234881023>=a)switch(a%=33554432,c){case 4:return G.rw[a/4];case 2:return G.rh[a/2];case 1:return G.m[a]}var b,k=G.rs(a,24);switch(k){case 2:a=(a-33554432)%262144;break;case 3:a=(a-50331648)%32768;break;case 4:a-= 67108864;break;case 5:a=(a-83886080)%1024;break;case 6:a=(a-100663296)%131072;98303<a&&131072>a&&(a-=8E3);void 0!==f&&G.vram(a,f,c);break;case 7:a=(a-117440512)%1024;break;case 8:case 9:case 10:case 11:case 12:case 13:a%=33554432;k=8;break;case 14:case 15:k=14,a%=16777216}if(void 0!==f){h=h||4294967295;for(b=0;b<c;b++,f=G.rs(f,8),h=G.rs(h,8))G.m[k][a+b]=((G.m[k][a+b]||0)&255-(h&255))+(f&h&255)}else{f=0;for(b=c;b;b--)f=G.ls(f,8)+(G.m[k][a+b-1]||0);return f}},vram:function(a,c,f){var h,b,k,e,p,n;h= 8*G.bit(c,0,4);b=8*G.bit(c,5,9);k=8*G.bit(c,10,14);4==f&&(e=8*G.bit(c,0,4),p=8*G.bit(c,5,9),n=8*G.bit(c,10,14));G._p.data[2*a]=h;G._p.data[2*a+1]=b;G._p.data[2*a+2]=k;G._p.data[2*a+3]=255;4==f&&(G._p.data[2*a+4]=e,G._p.data[2*a+5]=p,G._p.data[2*a+6]=n,G._p.data[2*a+7]=255)}}