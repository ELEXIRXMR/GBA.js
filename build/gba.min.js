"undefined"===typeof debug&&(debug=!1);function $(a){return document.getElementById(a)}function hex(a,b){return b?("0000000"+a.toString(16).toUpperCase()).slice(-b):a.toString(16).toUpperCase()}function lshift(a,b){return a*Math.pow(2,b)}function rshift(a,b){return Math.floor(a/Math.pow(2,b))}function bit(a,b,c){return rshift(a,b)&Math.pow(2,(c||b)-b+1)-1}function ror(a,b,c){return lshift(a&Math.pow(2,c)-1,b-c)+rshift(a,c)}r=new Uint16Array(new ArrayBuffer(32));r[13]=50364160;r[15]=134217728;
spsr=cpsr=0;m=[,,new ArrayBuffer(262144),new ArrayBuffer(32768),new ArrayBuffer(1024),new ArrayBuffer(1024),new ArrayBuffer(98304),new ArrayBuffer(1024),,,,,,,new ArrayBuffer(65536)];m8=[];m16=[];m32=[];
function mem(a,b,c,d){var f,e;f=void 0!==c;1===b&&(e=m8);2===b&&(e=m16);4===b&&(e=m32);d=rshift(a,24);switch(d){case 2:a=(a-33554432)%262144;break;case 3:a=(a-50331648)%32768;break;case 4:a-=67108864;break;case 5:a=(a-83886080)%1024;break;case 6:a=(a-100663296)%131072;98303<a&&131072>a&&(a-=8E3);break;case 7:a=(a-117440512)%1024;break;case 8:case 9:case 10:case 11:case 12:case 13:d=8;a%=33554432;break;case 14:case 15:d=14,a%=16777216}if(f)e[d][a/b]=c;else return e[d][a/b]||0}canvas=[];imagedata=[];
for(i=0;4>i;i++)canvas.push($("canvas"+i).getContext("2d")),imagedata.push(canvas[i].createImageData(240,160));function load(a){var b,c;c=new XMLHttpRequest;c.open("GET",a);c.responseType="arraybuffer";c.send();c.onload=function(){m[8]=c.response;for(b=0;16>b;b++)m[b]&&(m8[b]=new Uint8Array(m[b]),m16[b]=new Uint16Array(m[b]),m32[b]=new Uint32Array(m[b]))}}arm_opcode=[];arm_params=[];arm_asm=[];arm_cond=[];thumb_opcode=[];thumb_params=[];thumb_asm=[];
function convert_all(){for(i=0;i<m32[8].length;i++)convert_ARM(i);for(i=0;i<m16[8].length;i++)convert_THUMB(i)}
function convert_ARM(a){var b,c;arm_asm[a]="?";instr=m32[8][a];b=arm_cond[a]=bit(instr,28,31);c="";0===b&&(c="EQ");1===b&&(c="NE");2===b&&(c="CS");3===b&&(c="CC");4===b&&(c="MI");5===b&&(c="PL");6===b&&(c="VS");7===b&&(c="VC");8===b&&(c="HI");9===b&&(c="LS");10===b&&(c="GE");11===b&&(c="LT");12===b&&(c="GT");13===b&&(c="LE");15===b&&(c="NV");if(77823===bit(instr,8,27))arm_opcode[a]=arm_bx,arm_params[a]=[bit(instr,0,3)],arm_asm[a]="BX"+c+" r"+arm_params[a][0];else if(5===bit(instr,25,27))b=bit(instr,
24),arm_params[a]=[4*a+134217736+4*bit(instr,0,23)],b?(arm_opcode[a]=arm_bl,arm_asm[a]="BL"):(arm_opcode[a]=arm_b,arm_asm[a]="B"),arm_asm[a]+=c+" 0x"+hex(arm_params[a][0]),arm_params[a][0]<134217728+4*a&&(arm_asm[a]+=" ;\u2191"),arm_params[a][0]>134217728+4*a&&(arm_asm[a]+=" ;\u2193"),arm_params[a][0]===134217728+4*a&&(arm_asm[a]+=" ;\u2190");else if(1===bit(instr,26,27))15===bit(instr,16,19)?(arm_params[a]=[bit(instr,12,15),mem(4*a+134217736+bit(instr,0,11),4)],bit(instr,20)?(arm_opcode[a]=arm_ldr_ri,
arm_asm[a]="LDR"):(arm_opcode[a]=arm_str_ri,arm_asm[a]="STR"),arm_asm[a]+=c+" r"+arm_params[a][0]+",=#0x"+hex(arm_params[a][1].toString(16))):(arm_params[a]=[bit(instr,12,15),bit(instr,16,19),bit(instr,0,11)],bit(instr,20)?(arm_opcode[a]=arm_ldr_rrn,arm_asm[a]="LDR"):(arm_opcode[a]=arm_str_rrn,arm_asm[a]="STR"),arm_asm[a]+=c+" r"+arm_params[a][0]+",[r"+arm_params[a][1]+",0x"+hex(arm_params[a][2])+"]");else if(0===bit(instr,25,27)&&0===bit(instr,7)&&15!=bit(instr,12,15))arm_opcode[a]=null,arm_params[a]=
[],arm_asm[a]="ARM7";else if(b=0,!bit(instr,18)&&8<=bit(instr,21,24)&&11>=bit(instr,21,24))1===bit(instr,19)&&(b+=4278190080),1===bit(instr,16)&&(b+=255),arm_params[a]=[bit(instr,0,3),bit(instr,19),bit(instr,16),b],bit(instr,22)?(arm_opcode[a]=arm_msr_spsr,arm_asm[a]="MSR"+c+" spsr_"+(arm_params[a][1]?"f":"")+(arm_params[a][2]?"c":"")+",r"+arm_params[a][0]):(arm_opcode[a]=arm_msr_cpsr,arm_asm[a]="MSR"+c+" cpsr_"+(arm_params[a][1]?"f":"")+(arm_params[a][2]?"c":"")+",r"+arm_params[a][0]);else switch(c=
0,bit(instr,25)&&(is=2*bit(instr,8,11),nn=bit(instr,0,7),c=ror(nn,32,is)),bit(instr,21,24)){case 4:15===bit(instr,16,19)?(arm_opcode[a]=arm_add_ri,arm_params[a]=[bit(instr,12,15),4*a+134217736+c],arm_asm[a]="ADD r"+arm_params[a][0]+",=#0x"+hex(arm_params[a][1])):(arm_opcode[a]=arm_add_rrn,arm_params[a]=[bit(instr,12,15),bit(instr,16,19),c],arm_asm[a]="ADD r"+arm_params[a][0]+",r"+arm_params[a][1]+",0x"+hex(arm_params[a][2]));break;case 13:arm_opcode[a]=arm_mov,arm_params[a]=[bit(instr,12,15),c],arm_asm[a]=
"MOV r"+arm_params[a][0]+",0x"+hex(arm_params[a][1])}void 0!=debug&&$("armvalue"+hex(134217728+4*a))&&($("armvalue"+hex(134217728+4*a)).innerHTML=hex(m32[8][a],8),$("armname"+hex(134217728+4*a)).innerHTML=arm_asm[a])}function convert_THUMB(a){}function trace(){}function play(){}arm_bx=function(a){};arm_blx=function(a){};arm_b=function(a){};arm_bl=function(a){};arm_add_rrn=function(a){};arm_add_ri=function(a){};arm_mov=function(a){};arm_msr_cpsr=function(a){};arm_msr_spsr=function(a){};arm7=function(){};
arm_str_rrn=function(a){};arm_ldr_rrn=function(a){};arm_str_ri=function(a){};arm_ldr_ri=function(a){};